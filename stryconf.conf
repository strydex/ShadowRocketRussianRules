# Shadowrocket: 2026-01-18 23:59:53
[General]

# Быстрая настройка Shadowrocket:
# Включите английский язык Настройки → Language → English
# Идем в Home и нажимаем «+» или Add Server
# Добавьте любой подходящий конфиг: Config → «+» или Download from URL
# В настройках выберите способ проверки Settings → Advanced → Connect
# Нажмите Connectivity Test и если сервер доступен, то нажмите на ползунок
# При первом запуске появится запрос на установку VPN-конфигурации — нажмите «OK» и «Разрешить».

# Включение HTTPS-декрипции:
# В Config → ⓘ, → HTTPS Decryption → Certificate → Generate A New CA Certificate → Install CA Certificate to System
# В настройках системы — скачанные профили — «Установить».
# В настройках системы — «Основные» — «О устройстве» — «Настройки доверия сертификатов» — включить сертификат Shadowrocket.
# Для синхронизации между устройствами, если конфиг содержит ключ, рекомендуется сразу установить сертификат, а не генерировать новый.

# Системные сетевые вызовы (например, push-уведомления, iOS системные сервисы) будут обходить прокси.
# Если выставить false, легитимный системный трафик может пойти через прокси,
# что приведёт к задержкам или некорректной работе системных функций.
bypass-system = true

# Отключение поддержки IPv6. В системах и сетях, где IPv6 стабильный и
# поддерживается, можно включить (true), иначе IPv4 останется основным
ipv6 = false

# Отдавать приоритет разрешению DNS-записей AAAA (IPv6) над A (IPv4).
# Важно только если ipv6 включён. Полезно на сетях с сильной поддержкой IPv6, иначе оставлять false.
prefer-ipv6 = false

# Если true, при DNS-запросах возвращаются приватные IP адреса (например, из диапазона 192.168.x.x). При false Shadowrocket будет считать домен "захваченным" и принудительно отправит трафик через прокси, что может нарушать локальную сеть. Обычно лучше оставлять true.
private-ip-answer = false

# Управляет тем, будет ли DNS разрешение происходить напрямую через системный DNS, а не через прокси или настроенный DoH/DoT. Если точно нужен перехват DNS — оставлять false; для обхода по системному DNS — true.
dns-direct-system = true

# Если DNS-запросы через основной DNS (например DoH) неудачны, будет ли пробоваться системный DNS. При false — отказ DNS через fallback. Можно включить, чтобы повысить стабильность разрешения.
dns-fallback-system = false

# Если прямое разрешение DNS не работает, использовать прокси-сервер для DNS-запросов
dns-direct-fallback-proxy = true

# Перезаписывает системный DNS на указанные DoH-серверы. Google DNS — стандартный, Adguard предлагает блокировку рекламы. Хорошая практика для приватности и обхода фильтров.
# Вы можете выбрать альтернативный DOH/DOT — https://github.com/curl/curl/wiki/DNS-over-HTTPS
dns-server = cloudflare-dns.com,dns.adguard-dns.com,https://dns.google/dns-query,https://dns.adguard-dns.com/dns-query

# При сбое основного django Server — fallback на системный DNS. Можно указать другие DoH, но у вас стоит system для совместимости
# fallback-dns-server = https://cloudflare-dns.com/dns-query, https://freedns.controld.com/p3
fallback-dns-server = system

# Перехватывает DNS-запросы некоторых сервисов (Например, Netflix) на UDP/TCP порт 53 и направляет через программу
hijack-dns = :53

# Адреса/домены, обходящие прокси, но проходящие через туннель (TUN-интерфейс)
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ru

# IP-диапазоны, исключённые из туннеля (TUN-интерфейс). Например, UDP/DNS для стабильности сетевых сервисов
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32,239.255.255.250/32

# По умолчанию TUN пытается взять на себя весь трафик,
# но из-за системных особенностей часть трафика может обходить туннель.
# С помощью этого параметра можно добавить дополнительные IP-диапазоны или маршруты,
# которые гарантированно будут проходить через туннель Shadowrocket.
# Обычно оставляют пустым, если нет проблем с прохождением трафика.
# tun-included-routes =

# Позволяет SR возвращать настоящий IP вместо fake-IP для перечисленных доменов. Это важно для служб, где нужно "реальное" соединение без проксирования (например, NTP, Cloudflare client). Позволяет сократить проблемы с задержками, ошибками соединения и энергопотреблением.
always-real-ip = *

# Включает автоматический ответ на ping (ICMP Echo Request) от имени TUN-интерфейса. Удобно для сетевой диагностики, но может приводить к созданию fake-IP маппинга, что увеличивает расход ресурсов и может в итоге разряжать аккумулятор. Если цель — минимизация fake-IP и энергозатрат, ставить false.
icmp-auto-reply = false

# Управляет, активна ли политика REJECT для URL-перезаписи вне режима конфигурации. При true REJECT работает постоянно, что может «жёстко» блокировать трафик.
always-reject-url-rewrite = false

# Как поступать с UDP-трафиком, если политика узла не поддерживает UDP-перенаправление: отбрасывать (REJECT) или направлять напрямую (DIRECT). Выбор зависит от желаемого поведения и возможности узла.
udp-policy-not-supported-behaviour = REJECT

# Позволяет включать внешние конфигурационные файлы. Удобно для больших конфигов, переиспользования настроек.
# Если параметры или правила в подключаемом файле пересекаются с основным, приоритет обычно имеет основной файл (где прописано include), но детали могут зависеть от реализации.
include = 

# URL-адрес обновления файла конфигурации
update-url = https://cdn.jsdelivr.net/gh/misha-tgshv/shadowrocket-configuration-file@main/conf/sr_ru_basic.conf

# Выбираем наиболее быстрый сервера для прокси
# [Proxy Group]
# AUTO = url-test,interval=600,timeout=5,url=https://cp.cloudflare.com/generate_204,policy-regex-filter=*

# Опционально. Добавьте эти адреса в настройках программы Settings → GeoLite2 Database
# Если у вас нет аккаунта на Maxmind и вы испольузуете финальное правило Proxy или Auto
# country: https://git.io/GeoLite2-Country.mmdb
# asn: https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb

# Выборочные правила маршрутизации

[Rule]
RULE-SET,https://github.com/toneywhitez/zkeen_rules/releases/latest/download/telegram_ips.list,DIRECT
IP-ASN,44907,DIRECT
IP-ASN,21157,DIRECT
IP-ASN,59930,DIRECT
IP-ASN,62014,DIRECT
IP-ASN,62041,DIRECT
IP-ASN,396986,PROXY
DOMAIN-SET,https://github.com/anon7652/sr-ru-rules/releases/download/202601171539/geosite-ru-available-only-inside.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/Semporia/Quantumult-X/master/Filter/TikTok.list,PROXY
RULE-SET,https://raw.githubusercontent.com/LM-Firefly/Rules/master/Global-Services/TikTok.list,PROXY
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/TikTok.list,PROXY
RULE-SET,https://raw.githubusercontent.com/bybgz/tiktok-conf/master/shadowrocket/tiktok.list,PROXY
RULE-SET,https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Shadowrocket/TikTok/TikTok.list,PROXY
DOMAIN-SUFFIX,tiktokglobalshopv.com,PROXY,extended-matching
RULE-SET,https://github.com/anon7652/sr-ru-rules/releases/download/202601171539/geosite-ru-blocked.list,PROXY
DOMAIN-WILDCARD,*.рф,DIRECT
DOMAIN-WILDCARD,*.ru,DIRECT
GEOIP,RU,DIRECT
RULE-SET,https://raw.githubusercontent.com/strydex/ShadowRocketRussianRules/4ced03b0c5106529ed2b47a66130d3c66fa1ddf3/sr_ad_only.conf.list,REJECT
FINAL,PROXY

[MITM]
ca-passphrase = Bf1R5f4s
ca-p12 = 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
enable = false
